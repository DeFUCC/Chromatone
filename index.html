<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <title>Chromatone app beta</title>
  <link href="css/styles.css" rel="stylesheet" />
  <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
  <link rel="stylesheet" href="assets/buefy.min.css" />
  <link rel="stylesheet" href="css/Chromatone.css" />

  <script src="assets/StartAudioContext.js"></script>
  <script src="assets/Tone.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/vue/2.5.16/vue.min.js"></script>
  <script src="assets/vue-slider.js"></script>
  <script src="assets/buefy.js"></script>
</head>


<body>



  <div id="vuetone">

    <div class="row switches">
      <div class="row">
        <div class="logo level-item is-6 has-text-centered">
          <a href="http://www.chromatone.center"><img src="logo.svg" style="min-width:150px"></a>

          <knob min="-30" max="0" param="VOL" v-model="vol" />

          <div class="tip" slot="tooltip">VOL<br><b>{{setVolume}}</b></div>
          </vue-slider>
        </div>

        <div class="switch-row has-text-centered">

          <button v-for="(block,i) in open" class="button is-small is-rounded" :class="{pushed:open[i]}" @click="open[i]=!open[i]">
            {{i}}
          </button>

        </div>
      </div>
    </div>


      <oscilloscope v-if="open.oscilloscope"></oscilloscope>


    <div v-show="open.beat" class="row">
      <beat></beat>
    </div>

    <div v-if="open.scales" class="row">
      <div class="scale-select level wrap is-mobile">
        <div class="level-item">
            Scale
        </div>

        <div class="level-item scale-select">
            <b-field>
              <b-select size="is-small" v-model="scale">
                <option v-for="scal in scales" v-bind:value="scal">
                  {{ scal.name }}
                </option>
              </b-select>
            </b-field>
        </div>
        <div class="level-item">

          <svg @touchstart.stop.prevent="1" width="100%" viewbox="0 0 390 40">
            <g v-for="(note, i) in activeNotes"
               :key="note"
                @touchstart.stop.prevent="root=note.pitch"
                @mousedown.stop.prevent="root=note.pitch"
                class="root-select">
              <circle
                    r="14"
                    :cx="20+i*32"
                    :cy="20"
                    :data-pitch="note.pitch"
                    :data-active="note.active"
                    :class="{'is-root':note.pitch==root}"
                    :style="{stroke:notes[root].color}"></circle>
              <text
                  :x="20+i*32"
                  y="25"
                  text-anchor="middle"
                  fill="white"
                  style="font-size:14px;font-weight:bold;text-anchor: middle;">{{note.name}}</text>
            </g>
          </svg>
        </div>
      </div>
    </div>



    <div v-show="open.synth" class="row">
      <synth></synth>
    </div>


  <div v-if="open.grid" class="row">
      <tone-grid :root="root" :steps="scale.steps"></tone-grid>
    </div>


    <div v-if="open.field" class="row field">
      <field :root="root" :steps="scale.steps"></field>
    </div>


    <div v-if="open.array" class="row">
          <tonal-array :root="root" :steps="scale.steps"></tonal-array>
 </div>


    <div v-if="open.keys" class="row">
      <key-stack :root="root" :steps="scale.steps" @play="play" @stop="stop"></key-stack>
    </div>

  <div v-if="open.table" class="row">
     <pitch-table></pitch-table>
  </div>




  </div>
  <script src="js/Scales.js"></script>
  <script src="js/Synth.js"></script>
  <script src="js/components/tone-grid.js"></script>
  <script src="js/components/knob.js"></script>
  <script src="js/components/beat-tracker.js"></script>
  <script src="js/components/field.js"></script>
  <script src="js/components/key-stack.js"></script>
  <script src="js/components/synth.js"></script>
  <script src="js/components/osc.js"></script>
  <script src="js/components/tonal-array.js"></script>
  <script src="js/components/pitch-table.js"></script>
  <script src="js/app.js"></script>

</body>

</html>
